<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль - Хакатон Хаб</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
        }
        .profile-header h2 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
        }
        .profile-header p {
            margin: 0;
            opacity: 0.9;
        }
        .edit-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .edit-btn:hover {
            background: white;
            color: #667eea;
        }
        .profile-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .profile-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .profile-card h3 {
            margin-top: 0;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .profile-info-item {
            margin: 1rem 0;
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .profile-info-item strong {
            display: block;
            color: #333;
            margin-bottom: 0.25rem;
        }
        .profile-info-item span {
            color: #666;
        }
        .profile-info-item input,
        .profile-info-item select {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
            font-size: 1rem;
            margin-top: 0.25rem;
        }
        .profile-info-item input:focus,
        .profile-info-item select:focus {
            outline: none;
            border-color: #667eea;
        }
        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .skill-tag {
            background: #667eea;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        .skills-selector {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
        }
        .skills-selector.active {
            display: block;
        }
        .skill-category {
            margin-bottom: 1.5rem;
        }
        .skill-category h4 {
            color: #667eea;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        .skill-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.5rem;
        }
        .skill-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .skill-checkbox:hover {
            background: #e5e7eb;
        }
        .skill-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .skill-checkbox label {
            cursor: pointer;
            flex: 1;
            color: #333;
        }
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: flex-end;
        }
        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        .btn-secondary:hover {
            background: #4b5563;
        }
        .no-data {
            color: #999;
            font-style: italic;
        }
        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }
        .message.success {
            background: #10b981;
            color: white;
        }
        .message.error {
            background: #ef4444;
            color: white;
        }
        .message.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Upper Navigation Hub -->
    <nav class="top-nav">
        <div class="nav-container">
            <button class="menu-btn" id="menuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="logo">
                <h1>Хакатон Хаб</h1>
            </div>
            <ul class="nav-links">
                <li><a href="/">Главная</a></li>
                <li><a href="registration.html" id="registerLink">Регистрация</a></li>
                <li><a href="hackathons.html">Хакатоны</a></li>
                <li><a href="seminars.html">Семинары</a></li>
                <li><a href="about.html">О нас</a></li>
                <li><a href="profile.html" class="active" id="profileLink" style="display: none;">Профиль</a></li>
                <li><a href="login.html" id="loginLink">Вход</a></li>
                <li><a href="/" id="logoutLink" style="display: none;">Выход</a></li>
                <li><a href="expert.html" id="expertLink" style="display: none;">Панель эксперта</a></li>
                <li><a href="admin.html" id="adminLink" style="display: none;">Админ</a></li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar Hub -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Информационный Хаб</h2>
            <button class="close-btn" id="closeBtn">&times;</button>
        </div>
        <div class="sidebar-content">
            <div class="hub-section" id="participantsSection">
                <h3>Участники</h3>
                <div class="info-card">
                    <p><strong>Всего участников:</strong> 1,234</p>
                    <p><strong>Активных сейчас:</strong> 89</p>
                    <p><strong>Зарегистрировано в этом месяце:</strong> 156</p>
                </div>
            </div>
            <div class="hub-section" id="hackathonsSection">
                <h3>Хакатоны</h3>
                <div class="info-card">
                    <p><strong>Предстоящие:</strong> 12</p>
                    <p><strong>Текущие:</strong> 3</p>
                    <p><strong>Завершённые:</strong> 45</p>
                </div>
            </div>
            <div class="hub-section" id="coursesSection">
                <h3>Интенсивные Курсы</h3>
                <div class="info-card">
                    <p><strong>Доступных курсов:</strong> 8</p>
                    <p><strong>Записанных студентов:</strong> 567</p>
                    <p><strong>Процент завершения:</strong> 78%</p>
                </div>
            </div>
            <div class="hub-section" id="organizationsSection">
                <h3>Организации</h3>
                <div class="info-card">
                    <p><strong>Всего организаций:</strong> 24</p>
                    <p><strong>Активных партнёров:</strong> 18</p>
                    <p><strong>Опубликовано хакатонов:</strong> 67</p>
                </div>
            </div>
            <div class="hub-section" id="statisticsSection">
                <h3>Статистика</h3>
                <div class="info-card">
                    <p><strong>Всего проектов:</strong> 890</p>
                    <p><strong>Процент успеха:</strong> 82%</p>
                    <p><strong>Средний размер команды:</strong> 4.2</p>
                    <p><strong>Призовой фонд:</strong> $125,000</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="profile-container">
            <div class="profile-header">
                <h2 id="profileName">Загрузка...</h2>
                <p id="profileRole">Загрузка данных профиля...</p>
                <button class="edit-btn" id="editBtn" onclick="toggleEditMode()">Редактировать</button>
            </div>

            <div id="messageContainer"></div>

            <div class="profile-content">
                <!-- Personal Information -->
                <div class="profile-card">
                    <h3>Личная информация</h3>
                    <div class="profile-info-item">
                        <strong>Имя пользователя</strong>
                        <span id="profileUsername">-</span>
                        <input type="text" id="editUsername" style="display: none;" />
                    </div>
                    <div class="profile-info-item">
                        <strong>Полное имя</strong>
                        <span id="profileFullName">-</span>
                        <input type="text" id="editFullName" style="display: none;" />
                    </div>
                    <div class="profile-info-item">
                        <strong>Email</strong>
                        <span id="profileEmail">-</span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Возраст</strong>
                        <span id="profileAge">-</span>
                        <input type="number" id="editAge" style="display: none;" />
                    </div>
                    <div class="profile-info-item">
                        <strong>Город</strong>
                        <span id="profileCity">-</span>
                        <input type="text" id="editCity" style="display: none;" />
                    </div>
                    <div class="profile-info-item">
                        <strong>Telegram</strong>
                        <span id="profileTelegram">-</span>
                        <input type="text" id="editTelegram" style="display: none;" />
                    </div>
                    <div class="profile-info-item">
                        <strong>Роль</strong>
                        <span id="profileRoleText">-</span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Дата регистрации</strong>
                        <span id="profileCreatedAt">-</span>
                    </div>
                </div>

                <!-- Skills and Experience -->
                <div class="profile-card">
                    <h3>Навыки и опыт</h3>
                    <div class="profile-info-item">
                        <strong>Навыки/Технологии</strong>
                        <div id="profileSkills" class="skills-list">
                            <span class="no-data">Не указано</span>
                        </div>
                        <div id="skillsSelector" class="skills-selector">
                            <!-- Skills will be populated here -->
                        </div>
                    </div>
                    <div class="profile-info-item">
                        <strong>Команда</strong>
                        <span id="profileTeamName">-</span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Ищу команду</strong>
                        <span id="profileLookingForTeam">-</span>
                        <select id="editLookingForTeam" style="display: none;">
                            <option value="false">Нет</option>
                            <option value="true">Да</option>
                        </select>
                    </div>
                </div>

                <!-- Hackathons and Reputation -->
                <div class="profile-card">
                    <h3>Участие в хакатонах</h3>
                    <div id="hackathonsList">
                        <p class="no-data">Загрузка...</p>
                    </div>
                </div>
            </div>

            <div class="action-buttons" id="actionButtons" style="display: none;">
                <button class="btn btn-secondary" onclick="cancelEdit()">Отмена</button>
                <button class="btn btn-primary" onclick="saveProfile()">Сохранить</button>
            </div>
        </div>
    </main>

    <script src="/static/script.js"></script>
    <script>
        let currentUser = null;
        let isEditMode = false;

        // Skills data structure
        const skillsData = {
            programmingLanguages: {
                name: "Языки программирования",
                skills: ["Python", "Java", "JavaScript", "C++", "C#", "Swift", "Ruby", "PHP", "Go (Golang)", "Rust", "Kotlin", "TypeScript", "Scala"]
            },
            frameworks: {
                name: "Фреймворки",
                skills: ["Django (Python)", "Spring Boot (Java)", "React (JavaScript)", "Angular (JavaScript)", "Vue.js (JavaScript)", "Flask (Python)", "Express.js (JavaScript)"]
            },
            libraries: {
                name: "Библиотеки",
                skills: ["NumPy", "Pandas", "TensorFlow/Keras", "Scikit-learn", "Matplotlib/Seaborn", "OpenCV"]
            },
            services: {
                name: "Сервисы",
                skills: ["AWS Lambda", "Google Cloud Functions", "MongoDB/PostgreSQL", "Redis", "RabbitMQ/Apache Kafka"]
            },
            otherSkills: {
                name: "Другие навыки",
                skills: ["Git/SVN", "Agile Development", "Testing and debugging", "Data analysis", "Web Design"]
            },
            softSkills: {
                name: "Мягкие навыки",
                skills: ["Teamwork", "Empathy", "Creativity and innovation", "Problem solving skills"]
            },
            securitySkills: {
                name: "Навыки безопасности",
                skills: ["Analysis and identification of vulnerabilities in the code", "Knowledge of Security Rules (OWASP)", "Writing secure code"]
            }
        };

        // Update navigation on load
        if (typeof updateNavigation === 'function') {
            updateNavigation();
        }

        // Initialize skills selector
        function initSkillsSelector() {
            const container = document.getElementById('skillsSelector');
            container.innerHTML = '';

            Object.keys(skillsData).forEach(categoryKey => {
                const category = skillsData[categoryKey];
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'skill-category';

                const title = document.createElement('h4');
                title.textContent = category.name;
                categoryDiv.appendChild(title);

                const checkboxesDiv = document.createElement('div');
                checkboxesDiv.className = 'skill-checkboxes';

                category.skills.forEach(skill => {
                    const checkboxDiv = document.createElement('div');
                    checkboxDiv.className = 'skill-checkbox';

                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `skill-${categoryKey}-${skill}`;
                    checkbox.value = skill;
                    checkbox.dataset.category = categoryKey;

                    const label = document.createElement('label');
                    label.htmlFor = checkbox.id;
                    label.textContent = skill;

                    checkboxDiv.appendChild(checkbox);
                    checkboxDiv.appendChild(label);
                    checkboxesDiv.appendChild(checkboxDiv);
                });

                categoryDiv.appendChild(checkboxesDiv);
                container.appendChild(categoryDiv);
            });
        }

        // Load and display user profile
        async function loadProfile() {
            try {
                const response = await fetch('/api/user');
                if (!response.ok) {
                    if (response.status === 401) {
                        window.location.href = 'login.html';
                        return;
                    }
                    throw new Error('Ошибка загрузки профиля');
                }

                currentUser = await response.json();
                displayProfile(currentUser);
            } catch (error) {
                console.error('Ошибка загрузки профиля:', error);
                document.querySelector('.profile-header h2').textContent = 'Ошибка загрузки';
                document.querySelector('.profile-header p').textContent = 'Не удалось загрузить данные профиля';
            }
        }

        function displayProfile(user) {
            // Header
            document.getElementById('profileName').textContent = user.fio || user.username || 'Пользователь';
            const roleLabels = {
                'participant': 'Участник',
                'student': 'Студент',
                'case_holder': 'Кейсодержатель',
                'admin': 'Администратор',
                'user': 'Пользователь'
            };
            document.getElementById('profileRole').textContent = roleLabels[user.role] || user.role || 'Пользователь';

            // Personal Information
            document.getElementById('profileUsername').textContent = user.username || '-';
            document.getElementById('profileFullName').textContent = user.fio || '-';
            document.getElementById('profileEmail').textContent = user.email || '-';
            document.getElementById('profileAge').textContent = user.age || '-';
            document.getElementById('profileCity').textContent = user.city || '-';
            document.getElementById('profileTelegram').textContent = user.telegram_nickname || '-';
            document.getElementById('profileRoleText').textContent = roleLabels[user.role] || user.role || '-';

            if (user.created_at) {
                const date = new Date(user.created_at);
                document.getElementById('profileCreatedAt').textContent = date.toLocaleDateString('ru-RU', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            } else {
                document.getElementById('profileCreatedAt').textContent = '-';
            }

            // Skills - use basics_knowledge field
            const skillsContainer = document.getElementById('profileSkills');
            if (user.basics_knowledge && user.basics_knowledge.trim()) {
                const skills = user.basics_knowledge.split(',').map(s => s.trim()).filter(s => s);
                if (skills.length > 0) {
                    skillsContainer.innerHTML = skills.map(skill =>
                        `<span class="skill-tag">${skill}</span>`
                    ).join('');
                } else {
                    skillsContainer.innerHTML = '<span class="no-data">Не указано</span>';
                }
            } else {
                skillsContainer.innerHTML = '<span class="no-data">Не указано</span>';
            }

            // Team info
            document.getElementById('profileTeamName').textContent = user.team_name || '-';
            document.getElementById('profileLookingForTeam').textContent = user.looking_for_team ? 'Да' : 'Нет';
        }

        function toggleEditMode() {
            isEditMode = !isEditMode;

            if (isEditMode) {
                enterEditMode();
            } else {
                exitEditMode();
            }
        }

        function enterEditMode() {
            if (!currentUser) return;

            // Show edit inputs
            document.getElementById('editUsername').style.display = 'block';
            document.getElementById('editUsername').value = currentUser.username || '';
            document.getElementById('profileUsername').style.display = 'none';

            document.getElementById('editFullName').style.display = 'block';
            document.getElementById('editFullName').value = currentUser.fio || '';
            document.getElementById('profileFullName').style.display = 'none';

            document.getElementById('editAge').style.display = 'block';
            document.getElementById('editAge').value = currentUser.age || '';
            document.getElementById('profileAge').style.display = 'none';

            document.getElementById('editCity').style.display = 'block';
            document.getElementById('editCity').value = currentUser.city || '';
            document.getElementById('profileCity').style.display = 'none';

            document.getElementById('editTelegram').style.display = 'block';
            document.getElementById('editTelegram').value = currentUser.telegram_nickname || '';
            document.getElementById('profileTelegram').style.display = 'none';

            // Поле команды убрано из редактирования
            document.getElementById('editLookingForTeam').style.display = 'block';
            document.getElementById('editLookingForTeam').value = currentUser.looking_for_team ? 'true' : 'false';
            document.getElementById('profileLookingForTeam').style.display = 'none';

            // Show skills selector
            document.getElementById('skillsSelector').classList.add('active');
            document.getElementById('profileSkills').style.display = 'none';

            // Load selected skills
            if (currentUser.basics_knowledge) {
                const selectedSkills = currentUser.basics_knowledge.split(',').map(s => s.trim());
                document.querySelectorAll('#skillsSelector input[type="checkbox"]').forEach(checkbox => {
                    if (selectedSkills.includes(checkbox.value)) {
                        checkbox.checked = true;
                    }
                });
            }

            // Show action buttons
            document.getElementById('actionButtons').style.display = 'flex';
            document.getElementById('editBtn').textContent = 'Отмена';
        }

        function exitEditMode() {
            // Hide edit inputs
            document.getElementById('editUsername').style.display = 'none';
            document.getElementById('profileUsername').style.display = 'block';

            document.getElementById('editFullName').style.display = 'none';
            document.getElementById('profileFullName').style.display = 'block';

            document.getElementById('editAge').style.display = 'none';
            document.getElementById('profileAge').style.display = 'block';

            document.getElementById('editCity').style.display = 'none';
            document.getElementById('profileCity').style.display = 'block';

            document.getElementById('editTelegram').style.display = 'none';
            document.getElementById('profileTelegram').style.display = 'block';

            // Поле команды убрано из редактирования
            document.getElementById('editLookingForTeam').style.display = 'none';
            document.getElementById('profileLookingForTeam').style.display = 'block';

            // Hide skills selector
            document.getElementById('skillsSelector').classList.remove('active');
            document.getElementById('profileSkills').style.display = 'flex';

            // Hide action buttons
            document.getElementById('actionButtons').style.display = 'none';
            document.getElementById('editBtn').textContent = 'Редактировать';
        }

        function cancelEdit() {
            isEditMode = false;
            exitEditMode();
        }

        async function saveProfile() {
            try {
                // Collect form data
                const selectedSkills = Array.from(document.querySelectorAll('#skillsSelector input[type="checkbox"]:checked'))
                    .map(cb => cb.value);
                const skillsString = selectedSkills.join(',');

                const updateData = {
                    username: document.getElementById('editUsername').value,
                    fio: document.getElementById('editFullName').value,
                    age: document.getElementById('editAge').value ? parseInt(document.getElementById('editAge').value) : null,
                    city: document.getElementById('editCity').value,
                    telegram_nickname: document.getElementById('editTelegram').value,
                    looking_for_team: document.getElementById('editLookingForTeam').value === 'true',
                    basics_knowledge: skillsString
                    // team_name убран из редактируемых полей
                };

                const response = await fetch('/api/user', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updateData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.detail || 'Ошибка обновления профиля');
                }

                const result = await response.json();
                currentUser = result.user;

                // Show success message
                showMessage('Профиль успешно обновлен!', 'success');

                // Exit edit mode and reload profile
                isEditMode = false;
                exitEditMode();
                displayProfile(currentUser);

            } catch (error) {
                console.error('Ошибка сохранения профиля:', error);
                showMessage('Ошибка: ' + error.message, 'error');
            }
        }

        function showMessage(text, type) {
            const container = document.getElementById('messageContainer');
            container.innerHTML = `<div class="message ${type} active">${text}</div>`;
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        }

        // Load hackathons participations
        async function loadHackathons() {
            try {
                const response = await fetch('/api/participations');
                if (!response.ok) {
                    throw new Error('Ошибка загрузки участий');
                }
                const participations = await response.json();
                displayHackathons(participations);
            } catch (error) {
                console.error('Ошибка загрузки участий:', error);
                document.getElementById('hackathonsList').innerHTML = '<p class="no-data">Ошибка загрузки</p>';
            }
        }

        function displayHackathons(participations) {
            const container = document.getElementById('hackathonsList');
            if (participations.length === 0) {
                container.innerHTML = '<p class="no-data">Вы не участвуете ни в одном хакатоне</p>';
                return;
            }

            const roleLabels = {
                'captain': 'Капитан',
                'team_member': 'Участник команды',
                'free_participant': 'Свободный участник',
                'expert': 'Эксперт'
            };

            container.innerHTML = participations.map(p => {
                const startDate = new Date(p.start_date);
                const endDate = new Date(p.end_date);
                const hasTeam = p.team_id && (p.role === 'captain' || p.role === 'team_member');
                
                return `
                    <div class="profile-info-item" style="margin-bottom: 1.5rem; border-left: 4px solid #667eea;">
                        <strong>${p.hackathon_name}</strong>
                        <div style="margin-top: 0.5rem;">
                            <div><strong>Роль:</strong> ${roleLabels[p.role] || p.role}</div>
                            <div><strong>Репутация:</strong> <span style="color: #667eea; font-weight: 600;">${p.reputation}</span></div>
                            ${hasTeam ? `<div><strong>Команда:</strong> ${p.team_name || 'Команда #' + p.team_id}</div>` : ''}
                            <div style="font-size: 0.9rem; color: #666; margin-top: 0.25rem;">
                                ${startDate.toLocaleDateString('ru-RU')} - ${endDate.toLocaleDateString('ru-RU')}
                            </div>
                            <div style="font-size: 0.85rem; color: #999; margin-top: 0.25rem;">
                                Статус: ${p.hackathon_status === 'upcoming' ? 'Предстоящий' : 
                                         p.hackathon_status === 'ongoing' ? 'Текущий' : 'Завершён'}
                            </div>
                            <div style="margin-top: 0.75rem; display: flex; gap: 0.5rem;">
                                ${hasTeam ? `<a href="team.html?hackathon_id=${p.hackathon_id}&team_id=${p.team_id}" class="btn btn-primary" style="padding: 0.5rem 1rem; text-decoration: none; font-size: 0.9rem;">Открыть команду</a>` : ''}
                                <button onclick="cancelParticipation(${p.hackathon_id})" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem; cursor: pointer;">Отменить участие</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        async function cancelParticipation(hackathonId) {
            if (!confirm('Вы уверены, что хотите отменить участие в этом хакатоне?')) {
                return;
            }

            try {
                const response = await fetch(`/api/participations/${hackathonId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();
                if (response.ok) {
                    alert('Участие отменено');
                    await loadHackathons();
                } else {
                    alert(result.detail || 'Ошибка отмены участия');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Ошибка соединения с сервером');
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            initSkillsSelector();
            loadProfile();
            loadHackathons();
        });
    </script>
</body>
</html>
